<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Groups</title>
  <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
  <link rel="stylesheet" th:href="@{/css/styles.css}">
  <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
</head>
<body>
<div th:replace="~{fragments/layout :: app-nav}"></div>
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3">Группы</h1>
    <div class="d-flex justify-content-between align-items-center gap-4">
      <div th:replace="~{fragments/modals :: create-group-modal}"></div>
      <button class="btn btn-outline-primary" type="button"
              data-bs-toggle="offcanvas" data-bs-target="#group-categories-canvas"
              aria-controls="group-categories-canvas">
        Направления
      </button>
    </div>
  </div>
  <form method="get" action="#">
<!--    <div class="d-flex justify-content-between align-items-center mb-4">-->
<!--      <div th:replace="~{fragments/page_nav_controls :: limit_controls}" ></div>-->
<!--    </div>-->
<!--    <div th:replace="~{fragments/page_nav_controls :: page_controls}" ></div>-->
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle table-fixed">
        <thead>
        <tr>
          <th style="width: 10%">Select</th>
          <th style="width: 10%">Код</th>
          <th style="width: 55%">Направление</th>
          <th style="width: 25%">Куратор</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="group : ${groups}">
          <td><input type="checkbox" name="selected" th:value="${group.id}"></td>
          <td><a th:href="${'/groups/' + group.id}" th:text="${group.code}"></a></td>
          <td th:text="${group.categoryName}"></td>
          <td th:text="${group.curatorName}"></td>
        </tr>
        </tbody>
      </table>
    </div>
<!--    <div th:replace="~{fragments/page_nav_controls :: page_controls}" ></div>-->
  </form>
</div>

<div class="offcanvas offcanvas-end" tabindex="-1" id="group-categories-canvas"
     aria-labelledby="group-categories-canvas">
  <div class="offcanvas-header">
    <h5>Направления</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <div th:replace="~{fragments/modals :: create-group-category-modal}"></div>
    <table class="mt-3">
      <tr th:each="category : ${categories}" class="py-2">
        <td th:text="${category.name}"></td>
        <td style="width:30%">
          <div class="d-flex justify-content-between">
            <div th:replace="~{fragments/modals :: save-group-category-modal(${category})}"></div>
            <form th:action="${'/groups/categories/' + category.id + '/delete'}" method="get">
              <div th:replace="~{fragments/modals :: confirm-delete-modal('/groups/categories/' + ${category.id}, false, ${category.id})}"></div>
            </form>
          </div>
        </td>
      </tr>
    </table>
  </div>
</div>
</body>
</html>